#!/bin/bash
echo "" && \

echo "🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸" && \
echo "▶️   Ensuring schema.rb is up to date" && \
echo "" && \
echo "➖ Drop database" && \
bundle exec rails db:drop && \
echo "" && \
echo "➖ Delete db/schema.rb and db/structure.sql" && \
rm -f -v db/schema.rb && 
rm -f -v db/structure.sql && 
echo "" && \
echo "➖ Create database" && \
bundle exec rails db:create && \
echo "" && \
echo "➖ Migrate database" && \
bundle exec rails db:migrate && \
echo "" && \
echo "➖ Loading fixture data in development database" && \
bundle exec rails db:fixtures:load && \
echo "" \

echo "🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸" && \
echo "▶️   Annotating Models and Routes" && \
bundle exec annotate --force --models --routes && \
echo "" && \

echo "🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸" && \
echo "▶️   Linting & Repairing Ruby Code" && \
bundle exec rubocop -a && \
echo "" && \

echo "🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸" && \
echo "▶️   Running RSpec Tests" && \
bundle exec rspec --format Fuubar && \
echo "" && \

echo "🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸🔸" && \
echo "️✅   Done" && \
echo ""
